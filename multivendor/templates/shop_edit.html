{% extends "layout.html" %}

{% block content1 %}

  
<div class="content-section mb-4">
  <div class="header-title11">ðŸš€Edit Shop Info</div>
  <div class="sub-header11">Add More information about your store and customize it</div>

  <form method="POST", action="" enctype="multipart/form-data">
    {{ form.hidden_tag() }}
    <fieldset class="form-group">

       <!-- shopname Field -->
          <div class="form-group11">
            {{ form.shop_name.label(class="form-control-label", for="shop_name") }}
            {% if form.shop_name.errors %}
              {{ form.shop_name(class="form-control is-invalid", id="shop_name") }}
              <div class="invalid-feedback">
                {% for error in form.shop_name.errors %}
                  <span>{{ error }}</span>
                {% endfor %}
              </div>
            {% else %}
              {{ form.shop_name(class="form-control", id="name") }}
            {% endif %}
          </div>

          <!-- description Field -->
          <div class="form-group11">
            {{ form.shop_motto.label(class="form-control-label", for="shop_motto") }}
            {% if form.shop_motto.errors %}
              {{ form.shop_motto(class="form-control is-invalid", id="shop_motto") }}
              <div class="invalid-feedback">
                {% for error in form.shop_motto.errors %}
                  <span>{{ error }}</span>
                {% endfor %}
              </div>
            {% else %}
              {{ form.shop_motto(class="form-control", id="shop_motto") }}
            {% endif %}
          </div>

           <!-- description Field -->
          <div class="form-group11">
            {{ form.shop_about.label(class="form-control-label", for="shop_about") }}
            {% if form.shop_about.errors %}
              {{ form.shop_about(class="form-control is-invalid", id="shop_about") }}
              <div class="invalid-feedback">
                {% for error in form.shop_about.errors %}
                  <span>{{ error }}</span>
                {% endfor %}
              </div>
            {% else %}
              {{ form.shop_about(class="form-control", id="shop_about") }}
            {% endif %}
          </div>

          

      <div class="form-group11">
          <label for="picture" class="d-block">Upload Store Banner for Display</label>

          <!-- Hidden File Input with Multiple Selection Enabled -->
          {{ form.picture(class="form-control-file d-none", id="picture") }}

          <!-- Custom Upload Button (Using an Image) -->
          <label for="picture" class="custom-file-upload">
              <img src="{{ url_for('static', filename='images/cloud-upload-alt (1).png') }}" 
                   alt="Upload" width="50" height="50" style="cursor: pointer;">
          </label>

          <!-- Image Preview Container -->
          <div id="image-preview-container" class="mt-3"></div>

          <!-- Error Handling -->
          {% if form.picture.errors %}
              {% for error in form.picture.errors %}
                  <span class='text-danger'>{{ error }}</span><br>
              {% endfor %}
          {% endif %}
      </div>





    </fieldset>

    <!-- Submit Button -->
    <div class="form-group11">
      {{ form.submit(class="btn-custom") }}
    </div>
  </form>
<!-- JavaScript for Image Preview -->
<script>
document.getElementById('picture').addEventListener('change', function(event) {
    let previewContainer = document.getElementById('image-preview-container');
    previewContainer.innerHTML = ''; // Clear previous previews

    for (let file of event.target.files) {
        let reader = new FileReader();
        reader.onload = function(e) {
            let img = document.createElement('img');
            img.src = e.target.result;
            img.width = 60;  // Adjust preview size
            img.height = 60;
            img.style.margin = '5px';
            img.style.borderRadius = '8px';
            img.style.objectFit = 'cover';
            previewContainer.appendChild(img);
        };
        reader.readAsDataURL(file);
    }
});
</script>
</div>
{% endblock %}
